name: Yarn CLI

on:
  push: 
    branches: 
      - main

jobs: 
  add_env_variables_at_build:
    runs-on: ubuntu-latest
    name: Add Environment Variables During Yarn Build
    steps:
      - uses: actions/checkout@v3
      - name: Run Install
        uses: borales/actions-yarn@v4
        with:
          cmd: install

      - name: Build production bundle
        uses: borales/actions-yarn@v4
        with:
            cmd: build

  teardown_build_setup:
    runs-on: ubuntu-latest
    name: Tear Down Yarn Set-Up
    steps:
    - uses: comchangs/action-yarn@master
      with:
        args: cd exitcode-frontend; yarn install; yarn ng build
